# 3. 운영체제 (Operating System)

	3-1. 프로세스와 스레드의 차이
	3-2. 멀티스레드
	3-3. 스케줄러
	3-4. CPU 스케줄러
	3-5. 동기와 비동기의 차이
	3-6. 프로세스 동기화
	3-7. 메모리 관리 전략
	3-8. 가상 메모리
	3-9. 캐시의 지역성

## 잠깐! 메모리의 구조에 대해 알아보자
프로그램이 실행되기 위해서는 먼저 프로그램이 메모리에 load 되어야 한다.
컴퓨터의 운영체제는 프로그램의 실행을 위해 다양한 메모리 공간을 제공한다.
대표적인 메모리 공간은 크게 4가지로 나뉜다.
1. 코드(code) 영역
2. 데이터(data) 영역
3. 스택(stack) 영역
4. 힙(heap) 영역

[참고자료](http://www.tcpschool.com/c/c_memory_structure)

<img src='http://www.tcpschool.com/lectures/img_c_memory_structure.png'>

#### 1.코드 영역
메모리의 코드 영역은 실행할 프로그램의 코드가 저장되는 영역으로 텍스트 영역이라고도 부른다.
CPU는 코드 영역에 저장된 명령어를 하나씩 가져가서 처리한다.

#### 2. 데이터 영역
메모리의 데이터 영역은 프로그램의 전역 변수와 정적 변수가 저장되는 영역이다.
프로그램의 시작과 함께 할당되며, 프로그램이 종료되면 소멸한다.

#### 3. 스택 영역
메모리의 스택 영역은 함수의 호출과 관계되는 지역 변수와 매개변수가 저장되는 영역이다. 스택 영역은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다. 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(stack frame)이라고 한다.

스택 영역은 push 동작으로 데이터를 저장하고 pop 동작으로 데이터를 인출한다. 이러한 스택은 후입선출(LIFO, Last in First out) 방식에 따라 동작하므로, 가장 늦게 저장된 데이터가 가장 먼저 인출된다. 스택 영역은 메모리의 높은 주소에서 낮은 주소의 방향으로 할당된다.

#### 4. 힙 영역
메모리의 힙 영역은 사용자가 직접 관리할 수 있는 그리고 해야만 하는 메모리 영역이다. 힙 영역은 사용자에 의해 메모리 공간이 동적으로 할당되고 해제된다. 힙 영역은 메모리의 낮은 주소에서 높은 주소의 방향으로 할당된다.

> 여기서 잠깐!
> 자료구조 힙과 이 힙 영역은 같은 힙일까?
> https://www.inflearn.com/questions/163538
> 결론 : 아니다

## 프로세스와 스레드의 차이 (Process VS Thread)

### Program이란?	
	어떤 작업을 위해 실행할 수 있는 파일

### Process란?
	프로세스는 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램을 말한다.
	메모리에 올라와 실행되고 있는 컴퓨터 프로그램의 인스턴스 (독립적인 개체) : 프로그램에 필요한 내용이 컴퓨터 메모리(ram)에 적재되고 실행되는 상태
	운영체제로부터 시스템 자원을 할당받는 작업의 단위
	동적인 개념으로는 실행된 프로그램을 의미

	- 예시
    	- cpu 시간
    	- 운영되기 위해 필요한 주소 공간
    	- Code, Data, Stack, Heap의 구조로 되어 있는 독립된 메모리 영역

	- 특징
    	- 프로세스는 각각 독립된 메모리 영역(Code, Data, Stack, Heap의 구조)을 할당받는다.
    	- 기본적으로 프로세스당 최소 1개의 스레드(메인 스레드)를 가지고 있다.
    	- 각 프로세스는 별도의 주소 공간에서 실행되며, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없다.
    	- 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신을 사용해야 한다.

[프로세스와 스레드](https://doorbw.tistory.com/26)

### Thread란?
	프로세스 내에서 실행되는 여러 흐름의 단위
	프로세스의 특정한 수행 경로
	프로세스가 할당받은 자원을 이용하는 실행의 단위

	- 특징
    	- 스레드는 프로세스 내에서 각각 Stack만 따로 할당받고 Code, Data, Heap 영역은 공유한다.
    	- 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 프로세스 내의 주소 공간이나 자원들(힙 공간 등)을 갈은 프로세스 내에 스레드끼리 공유하면서 실행된다.
    	- 같은 프로세스 안에 있는 여러 스레드들은 같은 힙 공간을 공유한다. 반면에 프로세스는 다른 프로세스의 메모리에 직접 접근할 수 없다.
    	- 각각의 스레드는 별도의 레지스터와 스택을 갖고 있지만, 힙 메모리는 서로 읽고 쓸 수 있다.
    	- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드(sibling thread)도 그 변경 결과를 즉시 볼 수 있다.

### 멀티 프로세싱
	2개 이상의 다수의 프로세서가 협력적으로 작업을 동시에 처리하는 것

	프로세스 != 프로세서

### 멀티 스레딩(Multi-threading)
	하나의 프로세스 내에는 여러 개의 스레드가 존재
	다수의 스레드는 하나의 데이터 자원을 공유
	메모리에 대한 효율성을 가짐
	여러 개의 프로그램들을 병렬로 처리 가능
	자원을 공유하여 메모리에 대한 효율성을 가져올 수 있으며 경제성이 증가한다.

### 멀티 태스킹
	os를 통해 cpu가 작업하는데 필요한 자원(시간)을 프로세스 또는 스레드 간에 나누는 행위
	여러 응용 프로그램을 동시에 열고 작업할 수 있다
	여러 프로세스가 동시에 실행되고 관리되는 것처럼 보이지만 CPU는 사실 한번에 한가지 명령어밖에 처리하지 못한다. 동시에 프로세스들을 관리하는 것이 아니라 빠르게 프로세스들을 번갈아가며 실행하고 관리하는것이다. (Context switching : 문맥 교환) 

#### context switching
	하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스의 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업
	운영체제의 CPU작업을 할당하는 스케줄러(Scheuler)에 의해 발생

### 스케줄링
	CPU를 적절하고 효율적으로 사용할 수 있도록 하는 작업

### 스케줄러 (Scheduler)
	한정적인 메모리를 여러 프로세스가 효율적으로 사용할 수 있도록 다음 실행 시간에 실행할 수 있는 프로세스 중에 하나를 선택하는 역할

	스케줄러 종류
	1) 장기 스케줄러/ 잡 스케줄러
	2) 단기 스케줄러/ CPU 스케줄러
	3) 중기 스케줄러/ 스와퍼
	> https://dheldh77.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%ACScheduler

> https://dheldh77.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%ACScheduler
> https://doorbw.tistory.com/26
> https://charlezz.medium.com/process%EC%99%80-thread-%EC%9D%B4%EC%95%BC%EA%B8%B0-5b96d0d43e37
> https://gmlwjd9405.github.io/2018/05/10/data-structure-heap.html
> https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html